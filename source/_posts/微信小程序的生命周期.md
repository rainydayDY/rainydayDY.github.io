---
title: 微信小程序的生命周期
date: 2017-10-11 11:37:16
tags:
- 小程序
- javascripts
categories: 前端
---
### 前言 ###
&emsp;&emsp;介绍一下我的小程序，这是我毕设的题目，“大四一条街”，校内二手交易平台，一直都在维护更新中。
> 微信小程序搜索“大四一”，出现的“大四一条街Lite”就是我做的

<p hidden><!--more--></p>
参考链接：<a href="https://mp.weixin.qq.com/debug/wxadoc/dev/framework/app-service/page.html">微信小程序开发者文档</a>
建议：理解这个不难，如果是初学者，可以先不用去考虑这个图，等你有需要的时候再来看，理解的会更深刻。
第一次有需要，可以先去每个函数下打印，就会知道执行顺序；
``` javascript
Page({
  data: {
    text: "This is page data."
  },
  onLoad: function(options) {
    // Do some initialize when page load.
    console.log('onLoad')
  },
  onReady: function() {
    // Do something when page ready.
  },
  onShow: function() {
    // Do something when page show.
    console,log('onshow')
  },
  onHide: function() {
    // Do something when page hide.
  },
  onUnload: function() {
    // Do something when page close.
  },
  onPullDownRefresh: function() {
    // Do something when pull down.
  },
  onReachBottom: function() {
    // Do something when page reach bottom.
  },
  onShareAppMessage: function () {
   // return custom share data when user share.
  }
})
```
onshow()是每次进入页面都会执行一次，而onload只执行一次，我之所以会参考这张图，是因为自己在开发中遇到了这个问题。
描述一下我的项目：读者可以在微信小程序中搜索“大四一条街”底部菜单栏之间的跳转是不刷新页面的，从首页列表页进入详情页，详情页点击收藏按钮或者留言，再返回首页之后，收藏图标和收藏数，留言数都没有改变，是因为从首页跳转到详情页用的navigateTo()；进入的子页面，再返回到首页的时候没有刷新页面，原来我关于请求的函数都是写在onload里的，没有处理onshow，所以出现的结果是这样，后来把onload里面的所有都拿到onshow里面，问题就解决了，但是做前端一定要考虑的优化是避免一直发送请求，减少请求数，因为请求多的话加载速度就慢了，影响用户体验，所以我一般都是先从缓存中取数据，如果缓存里没有，再去发送请求。
